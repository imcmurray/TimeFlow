<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TimeFlow - Experience time as a gentle flowing river</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Skip to main content link for accessibility -->
        <a href="#timeline" class="skip-link" id="skip-link">Skip to main content</a>

        <!-- Header -->
        <header class="app-header">
            <button class="icon-btn" id="prev-day-btn" aria-label="Previous day">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="15,18 9,12 15,6"></polyline>
                </svg>
            </button>
            <div class="date-display">
                <h1 id="current-date">Today</h1>
                <span id="date-subtitle" class="date-subtitle"></span>
            </div>
            <button class="icon-btn" id="next-day-btn" aria-label="Next day">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="9,6 15,12 9,18"></polyline>
                </svg>
            </button>
            <button class="icon-btn" id="share-btn" aria-label="Share schedule">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="18" cy="5" r="3"></circle>
                    <circle cx="6" cy="12" r="3"></circle>
                    <circle cx="18" cy="19" r="3"></circle>
                    <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                    <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                </svg>
            </button>
            <button class="icon-btn settings-btn" id="settings-btn" aria-label="Settings">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                </svg>
            </button>
        </header>

        <!-- Main Timeline View -->
        <main class="timeline-container" id="timeline-container" aria-label="Daily timeline">
            <!-- NOW Line (fixed position) -->
            <div class="now-line" id="now-line" role="status" aria-live="polite" aria-label="Current time indicator">
                <div class="now-line-glow"></div>
                <div class="now-line-content">
                    <span class="now-label">NOW</span>
                    <span class="now-time" id="now-time">12:00 PM</span>
                </div>
            </div>

            <!-- Timeline -->
            <div class="timeline" id="timeline" role="list" aria-label="Scheduled tasks">
                <!-- Hour markers and tasks will be rendered here -->
            </div>

            <!-- Live region for screen reader announcements -->
            <div id="sr-announcements" class="sr-only" aria-live="polite" aria-atomic="true"></div>
        </main>

        <!-- Jump to NOW Button -->
        <button class="jump-to-now-btn" id="jump-to-now-btn" aria-label="Jump to current time" hidden>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
            <span>NOW</span>
        </button>

        <!-- Floating Action Button -->
        <button class="fab" id="add-task-btn" aria-label="Add new task">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        </button>

        <!-- Task Detail Modal -->
        <div class="modal-overlay" id="task-modal" hidden>
            <div class="modal" role="dialog" aria-labelledby="modal-title">
                <div class="modal-header">
                    <h2 id="modal-title">New Task</h2>
                    <button class="icon-btn close-btn" id="close-modal-btn" aria-label="Close">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
                <form id="task-form" class="task-form">
                    <input type="hidden" id="task-id" name="id">

                    <div class="form-group title-input-group">
                        <label for="task-title">Task Title</label>
                        <input type="text" id="task-title" name="title" required placeholder="Enter task title..." autocomplete="off">
                        <div class="title-suggestions" id="title-suggestions" hidden></div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="task-start-time">Start Time</label>
                            <input type="time" id="task-start-time" name="startTime" required>
                        </div>
                        <div class="form-group">
                            <label for="task-end-time">End Time</label>
                            <input type="time" id="task-end-time" name="endTime" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Quick Duration</label>
                        <div class="duration-presets" id="duration-presets">
                            <button type="button" class="duration-preset-btn" data-duration="15">15m</button>
                            <button type="button" class="duration-preset-btn" data-duration="30">30m</button>
                            <button type="button" class="duration-preset-btn" data-duration="45">45m</button>
                            <button type="button" class="duration-preset-btn" data-duration="60">1h</button>
                            <button type="button" class="duration-preset-btn" data-duration="90">1.5h</button>
                            <button type="button" class="duration-preset-btn" data-duration="120">2h</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="task-description">Description</label>
                        <textarea id="task-description" name="description" rows="3" placeholder="Add notes or details..."></textarea>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="task-important" name="isImportant">
                            <span class="checkbox-custom"></span>
                            <span>Mark as Important</span>
                        </label>
                    </div>

                    <div class="form-group">
                        <label for="task-color">Color</label>
                        <div class="color-picker" id="task-color-picker">
                            <button type="button" class="color-btn" data-color="" title="Default (Blue)">
                                <span class="color-swatch" style="background: var(--primary-500)"></span>
                            </button>
                            <button type="button" class="color-btn" data-color="purple" title="Purple">
                                <span class="color-swatch" style="background: #9c27b0"></span>
                            </button>
                            <button type="button" class="color-btn" data-color="green" title="Green">
                                <span class="color-swatch" style="background: #4caf50"></span>
                            </button>
                            <button type="button" class="color-btn" data-color="orange" title="Orange">
                                <span class="color-swatch" style="background: #ff9800"></span>
                            </button>
                            <button type="button" class="color-btn" data-color="red" title="Red">
                                <span class="color-swatch" style="background: #f44336"></span>
                            </button>
                            <button type="button" class="color-btn" data-color="teal" title="Teal">
                                <span class="color-swatch" style="background: #009688"></span>
                            </button>
                        </div>
                        <input type="hidden" id="task-color" name="color" value="">
                    </div>

                    <div class="form-group">
                        <label for="task-reminder">Reminder</label>
                        <select id="task-reminder" name="reminderMinutes">
                            <option value="">No reminder</option>
                            <option value="5">5 minutes before</option>
                            <option value="15">15 minutes before</option>
                            <option value="30">30 minutes before</option>
                            <option value="60">1 hour before</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="task-recurring">Repeat</label>
                        <select id="task-recurring" name="recurring">
                            <option value="">None (one-time task)</option>
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly</option>
                            <option value="weekdays">Weekdays (Mon-Fri)</option>
                            <option value="monthly">Monthly</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="task-attachment">Attachment</label>
                        <div class="attachment-container">
                            <input type="file" id="task-attachment" name="attachment" accept="image/*" hidden>
                            <button type="button" class="btn btn-secondary attachment-btn" id="attachment-btn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path>
                                </svg>
                                Add Photo/File
                            </button>
                            <div class="attachment-preview" id="attachment-preview" hidden>
                                <img id="attachment-preview-img" alt="Attachment preview">
                                <button type="button" class="remove-attachment-btn" id="remove-attachment-btn" aria-label="Remove attachment">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <line x1="18" y1="6" x2="6" y2="18"></line>
                                        <line x1="6" y1="6" x2="18" y2="18"></line>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <input type="hidden" id="task-attachment-data" name="attachmentData">
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="delete-task-btn" hidden>Delete</button>
                        <button type="submit" class="btn btn-primary">Save Task</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Settings Modal -->
        <div class="modal-overlay" id="settings-modal" hidden>
            <div class="modal" role="dialog" aria-labelledby="settings-title">
                <div class="modal-header">
                    <h2 id="settings-title">Settings</h2>
                    <button class="icon-btn close-btn" id="close-settings-btn" aria-label="Close">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
                <div class="settings-content">
                    <div class="settings-group">
                        <h3>Appearance</h3>
                        <div class="setting-item">
                            <label for="theme-select">Theme</label>
                            <select id="theme-select">
                                <option value="light">Light</option>
                                <option value="dark">Dark</option>
                                <option value="auto">System Default</option>
                            </select>
                        </div>
                    </div>

                    <div class="settings-group">
                        <h3>Notifications</h3>
                        <div class="setting-item">
                            <label class="checkbox-label">
                                <input type="checkbox" id="notifications-enabled" checked>
                                <span class="checkbox-custom"></span>
                                <span>Enable Notifications</span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <label for="default-reminder">Default Reminder</label>
                            <select id="default-reminder">
                                <option value="5">5 minutes before</option>
                                <option value="15" selected>15 minutes before</option>
                                <option value="30">30 minutes before</option>
                                <option value="60">1 hour before</option>
                            </select>
                        </div>
                    </div>

                    <div class="settings-group">
                        <h3>Timeline</h3>
                        <div class="setting-item">
                            <label for="timeline-density">Timeline Density</label>
                            <input type="range" id="timeline-density" min="0.5" max="2" step="0.1" value="1">
                        </div>
                    </div>

                    <div class="settings-group about-section">
                        <h3>About</h3>
                        <p class="about-text">TimeFlow v1.0.0</p>
                        <p class="about-tagline">Experience time as a gentle flowing river, not a pressure cooker.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Share Modal -->
        <div class="modal-overlay" id="share-modal" hidden>
            <div class="modal" role="dialog" aria-labelledby="share-title">
                <div class="modal-header">
                    <h2 id="share-title">Share Schedule</h2>
                    <button class="icon-btn close-btn" id="close-share-btn" aria-label="Close">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
                <div class="share-content">
                    <div class="share-time-range">
                        <label>Time Range</label>
                        <div class="time-range-inputs">
                            <input type="time" id="share-start-time" aria-label="Start time for sharing">
                            <span class="time-range-separator">to</span>
                            <input type="time" id="share-end-time" aria-label="End time for sharing">
                            <button type="button" class="btn btn-small btn-secondary" id="share-reset-range" aria-label="Reset to full day">Reset</button>
                        </div>
                    </div>
                    <div class="share-privacy-options">
                        <label class="checkbox-label">
                            <input type="checkbox" id="share-hide-details">
                            <span class="checkbox-custom"></span>
                            <span>Hide descriptions (show only titles & times)</span>
                        </label>
                    </div>
                    <div class="share-preview" id="share-preview">
                        <!-- Preview will be rendered here -->
                    </div>
                    <div class="share-options">
                        <button class="share-option-btn" id="share-image-btn" aria-label="Share as image">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                                <polyline points="21,15 16,10 5,21"></polyline>
                            </svg>
                            <span>Share as Image</span>
                        </button>
                        <button class="share-option-btn" id="share-text-btn" aria-label="Share as text">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14,2 14,8 20,8"></polyline>
                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                <line x1="16" y1="17" x2="8" y2="17"></line>
                                <polyline points="10,9 9,9 8,9"></polyline>
                            </svg>
                            <span>Share as Text</span>
                        </button>
                        <button class="share-option-btn" id="copy-link-btn" aria-label="Copy link">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                            </svg>
                            <span>Copy Link</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Confirmation Dialog -->
        <div class="modal-overlay" id="confirm-modal" hidden>
            <div class="modal confirm-modal" role="alertdialog" aria-labelledby="confirm-title" aria-describedby="confirm-message">
                <div class="modal-header">
                    <h2 id="confirm-title">Confirm Delete</h2>
                </div>
                <div class="confirm-content">
                    <p id="confirm-message">Are you sure you want to delete this task? This action cannot be undone.</p>
                </div>
                <div class="confirm-actions">
                    <button type="button" class="btn btn-secondary" id="confirm-cancel-btn">Cancel</button>
                    <button type="button" class="btn btn-danger" id="confirm-delete-btn">Delete</button>
                </div>
            </div>
        </div>

        <!-- Toast Notifications -->
        <div class="toast-container" id="toast-container"></div>

        <!-- Onboarding Modal -->
        <div class="modal-overlay onboarding-overlay" id="onboarding-modal" hidden>
            <div class="onboarding-container" role="dialog" aria-labelledby="onboarding-title">
                <div class="onboarding-slides" id="onboarding-slides">
                    <!-- Slide 1: Welcome -->
                    <div class="onboarding-slide active" data-slide="0">
                        <div class="onboarding-icon">
                            <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M12 8v4l3 3"></path>
                                <circle cx="12" cy="12" r="10"></circle>
                            </svg>
                        </div>
                        <h2 id="onboarding-title">Welcome to TimeFlow</h2>
                        <p class="onboarding-tagline">Experience time as a gentle flowing river, not a pressure cooker.</p>
                        <p class="onboarding-description">TimeFlow helps you plan your day in a calm, stress-free way. No harsh alarms or urgent notifications - just a peaceful view of your schedule.</p>
                    </div>

                    <!-- Slide 2: The NOW Line -->
                    <div class="onboarding-slide" data-slide="1">
                        <div class="onboarding-icon now-line-demo">
                            <div class="demo-now-line">
                                <span class="demo-now-label">NOW</span>
                                <span class="demo-now-time">12:00 PM</span>
                            </div>
                        </div>
                        <h2>The NOW Line</h2>
                        <p class="onboarding-tagline">Time flows gently past you.</p>
                        <p class="onboarding-description">The glowing blue line shows the current moment. Watch as your timeline scrolls smoothly - like time flowing by naturally. The present is always in view.</p>
                    </div>

                    <!-- Slide 3: Tasks -->
                    <div class="onboarding-slide" data-slide="2">
                        <div class="onboarding-icon">
                            <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <rect x="3" y="4" width="18" height="18" rx="2"></rect>
                                <line x1="16" y1="2" x2="16" y2="6"></line>
                                <line x1="8" y1="2" x2="8" y2="6"></line>
                                <line x1="3" y1="10" x2="21" y2="10"></line>
                                <line x1="9" y1="14" x2="15" y2="14"></line>
                            </svg>
                        </div>
                        <h2>Plan Your Day</h2>
                        <p class="onboarding-tagline">Add tasks with a simple tap.</p>
                        <p class="onboarding-description">Use the + button to add tasks. Set times, add reminders, mark important items, and even attach photos. Swipe right on any task to complete it.</p>
                    </div>

                    <!-- Slide 4: Get Started -->
                    <div class="onboarding-slide" data-slide="3">
                        <div class="onboarding-icon">
                            <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <polyline points="9 11 12 14 22 4"></polyline>
                                <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
                            </svg>
                        </div>
                        <h2>You're Ready!</h2>
                        <p class="onboarding-tagline">Start flowing with time.</p>
                        <p class="onboarding-description">That's all you need to know. Tap "Get Started" to begin planning your day with TimeFlow.</p>
                    </div>
                </div>

                <div class="onboarding-nav">
                    <div class="onboarding-dots" id="onboarding-dots">
                        <button class="onboarding-dot active" data-slide="0" aria-label="Slide 1"></button>
                        <button class="onboarding-dot" data-slide="1" aria-label="Slide 2"></button>
                        <button class="onboarding-dot" data-slide="2" aria-label="Slide 3"></button>
                        <button class="onboarding-dot" data-slide="3" aria-label="Slide 4"></button>
                    </div>
                    <div class="onboarding-buttons">
                        <button class="btn btn-secondary" id="onboarding-skip-btn">Skip</button>
                        <button class="btn btn-primary" id="onboarding-next-btn">Next</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js" type="module"></script>
</body>
</html>
